<script>
  function register(event) {
    event.preventDefault();
    const email = document.getElementById('regEmail').value.trim();
    const username = document.getElementById('regUsername').value.trim();
    const password = document.getElementById('regPassword').value;

    if (!email.endsWith("@st.spec.ed.jp")) {
      alert("メールアドレスは stアカウントのみ使用できます");
      return;
    }

    if (!email || !username || !password) {
      alert("すべての項目を入力してください");
      return;
    }

    localStorage.setItem("user_" + email, JSON.stringify({ email, username, password }));

    // ✅ 登録時にログイン状態を解除（保険）
    localStorage.removeItem("currentUser");

    alert("登録完了");
    location.href = "index.html";
  }
</script>
